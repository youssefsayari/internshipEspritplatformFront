



<!-- Zone de texte simul√©e pour √©crire un post -->
<div class="fake-input" (click)="openPostModal()">
  <img src="assets/images/profile/user-1.jpg" alt="user" />
  <span>What's New ?</span>
</div>

<!-- Overlay pour le modal -->
<div class="modal-overlay" *ngIf="isPostModalOpen" (click)="closePostModal()"></div>

<!-- Fen√™tre modale -->
<div class="modal-post" *ngIf="isPostModalOpen">
  <h3>Cr√©er un post</h3>
  <textarea [(ngModel)]="newPostContent" placeholder="Exprimez-vous..."></textarea>
  <div class="modal-actions">
    <button class="btn-cancel" (click)="closePostModal()">Annuler</button>
    <button class="btn-submit" (click)="addNewPost()">Publier</button>
  </div>
</div>





                              
<div *ngFor="let timeline of mytimelines; trackBy: trackByFn" class="timeline-card card p-3 mb-3">
  <div class="d-flex align-items-start">
     <!-- Image utilisateur avec clic -->
     <img *ngIf="timeline.image" 
     [src]="timeline.image" 
     width="50" 
     alt="user" 
     class="rounded-circle me-3" 
     (click)="onImageClick(timeline)" />

    <div class="w-100">
      <!-- Informations utilisateur -->
      <h5 class="fw-bold mb-1" (click)="onNameClick(timeline)" >{{ timeline.from }}</h5>
      <small class="text-muted">{{ timeline.time }}</small>

      <!-- Contenu de la timeline (texte ou image) -->
      <div *ngIf="isImage(timeline.content); else textContent">
        <img [src]="timeline.content" class="img-fluid mt-2" alt="timeline-image" />
      </div>
      <ng-template #textContent>
        <p class="mt-2">{{ timeline.content }}</p>
      </ng-template>

      <!-- √âvaluation par √©toiles -->
      <div class="d-flex align-items-center gap-3 mt-3">
        <span class="rate-text">‚≠ê Rate Us</span>
        <div class="rating-container">
          <!-- Boucle pour afficher les √©toiles -->
          <span *ngFor="let star of stars; let i = index" 
                (click)="setRating(timeline, i+1)" 
                (mouseenter)="timeline.hoverRating = i+1"
                (mouseleave)="timeline.hoverRating = 0"
                class="star-icon">
            
            <!-- Ic√¥ne √©toile active ou inerte -->
            <svg *ngIf="timeline.selectedRating >= i+1 || timeline.hoverRating >= i+1" xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="#f39c12" class="star active">
              <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path>
            </svg>
            <svg *ngIf="timeline.selectedRating < i+1 && timeline.hoverRating < i+1" xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="#bdc3c7" class="star inactive">
              <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path>
            </svg>
          </span>
        </div>
      </div>

      <!-- Afficher le message "Merci pour votre retour" -->
          <div *ngIf="timeline.feedbackGiven" class="feedback-message mt-2">
            <p class="font-weight-bold">Thank you for your feedback!</p>
          </div>


      <!-- Affichage des commentaires -->
      <div *ngFor="let comment of timeline.comments" class="comment mt-2">
        <div class="d-flex align-items-center">
          <!-- Image de l'utilisateur du commentaire -->
          <img src="assets/images/profile/user-1.jpg" width="30" alt="user" class="rounded-circle me-2" />
          <!-- Contenu du commentaire -->
          <p class="mb-0"><strong>{{ comment.user }}</strong>: {{ comment.text }}</p>
        </div>
      </div>

      <!-- Ajouter un commentaire -->
      <div class="mt-3 comment-input d-flex">
        <textarea placeholder="Ajouter un commentaire..." [(ngModel)]="timeline.newComment" rows="3"></textarea>
        <button (click)="addComment(timeline)">üì©</button>
      </div>
    </div>
  </div>
</div>
