<div class="panel-header panel-header-sm"></div>

<div class="main-content p-4">
  <h2 class="task-title mb-4">ğŸ‘¨â€ğŸ« Tutor Task Management</h2>

  <div class="form-group mb-4">
    <label for="studentDropdown" class="font-weight-bold">ğŸ‘¨â€ğŸ“ Select Student:</label>
    <select id="studentDropdown" class="form-control w-50" [(ngModel)]="selectedStudentId" (change)="onStudentChange()">
      <option [ngValue]="null" disabled selected>Select a student</option>
      <option *ngFor="let student of students" [ngValue]="student.idUser">
        {{ student.firstName }} {{ student.lastName }}
      </option>
    </select>
  </div>

  <div *ngIf="selectedStudentId" class="task-container">
    <div
      class="task-box"
      *ngFor="let status of statuses"
      [id]="status"
      cdkDropList
      [cdkDropListData]="getTasksByStatus(status)"
      [cdkDropListConnectedTo]="statuses"
      (cdkDropListDropped)="onTaskDrop($event, status)"
    >
      <h3>
        <i class="{{ iconForStatus(status) }}"></i> {{ statusLabel(status) }}
      </h3>

      <div
        class="task"
        *ngFor="let task of getTasksByStatus(status)"
        cdkDrag
        [cdkDragData]="task"
        [ngClass]="{
          'todo': task.status === 'TODO',
          'inprogress': task.status === 'INPROGRESS',
          'done': task.status === 'DONE'
        }"
      >
        <h4>{{ task.title }}</h4>
        <p>{{ task.description }}</p>
      </div>

      <div *ngIf="getTasksByStatus(status).length === 0" class="no-tasks">
        <em>No tasks available.</em>
      </div>
    </div>
  </div>
</div>
