<!-- defense-details.component.html -->
<div class="defense-details-container">
    <div *ngIf="isLoading" class="loading-overlay">
      <mat-spinner diameter="40" color="accent"></mat-spinner>
    </div>
  
    <div *ngIf="errorMessage" class="error-message">
      <mat-icon>error_outline</mat-icon>
      <p>{{ errorMessage }}</p>
    </div>
  
    <mat-card *ngIf="defense && !isLoading" class="defense-card">
      <mat-card-header class="card-header">
        <div class="header-content">
          <mat-icon class="header-icon">assignment_ind</mat-icon>
          <div>
            <mat-card-title class="card-title">Defense Session Details</mat-card-title>
            <mat-card-subtitle class="card-subtitle">Academic Review Committee</mat-card-subtitle>
          </div>
        </div>
      </mat-card-header>
  
      <mat-divider></mat-divider>

      <mat-card-content class="card-content">
        <div class="detail-grid">
          <!-- Student Card -->
          <mat-card class="detail-card">
            <mat-card-header>
              <mat-icon mat-card-avatar>person</mat-icon>
              <mat-card-title>Student</mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <h2 class="student-name">{{ defense.student.firstName }} {{ defense.student.lastName }}</h2>
              <p class="student-id">ID: {{ defense.student.identifiant || 'N/A' }}</p>
            </mat-card-content>
          </mat-card>

          <!-- Classroom Card -->
          <mat-card class="detail-card">
            <mat-card-header>
              <mat-icon mat-card-avatar>location_on</mat-icon>
              <mat-card-title>Location</mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <div class="location-info">
                <span class="classroom">{{ defense.classroom || 'TBD' }}</span>
                <span class="campus">Main Campus</span>
              </div>
            </mat-card-content>
          </mat-card>

          <!-- Schedule Card -->
          <mat-card class="detail-card">
            <mat-card-header>
              <mat-icon mat-card-avatar>schedule</mat-icon>
              <mat-card-title>Schedule</mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <div class="schedule-time">
                <div class="date">{{ getFormattedDate() }}</div>
                <div class="time">{{ getFormattedTime() }}</div>
              </div>
            </mat-card-content>
          </mat-card>
        </div>

      <!-- Enhanced Committee Section -->
      <mat-card class="committee-card">
        <mat-card-header>
            <mat-icon mat-card-avatar>groups</mat-icon>
            <mat-card-title>Examination Committee</mat-card-title>
            <mat-card-subtitle>Review Panel Members</mat-card-subtitle>
        </mat-card-header>

        <mat-divider></mat-divider>

        <mat-card-content class="committee-members">
            <div class="member-card" *ngFor="let tutor of defense.tutors">
                <div class="member-header">
                    <mat-icon class="member-icon">account_circle</mat-icon>
                    <div class="member-info">
                        <h3 class="member-name">{{ tutor.firstName }} {{ tutor.lastName }}</h3>
                        <div class="member-details">
                            <span class="member-role">
                                <mat-icon>work_outline</mat-icon>
                                {{ tutor.role || 'Committee Member' }}
                            </span>
                            <span class="member-department">
                                <mat-icon>corporate_fare</mat-icon>
                                {{ tutor.department || 'Department of Computer Science' }}
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </mat-card-content>
    </mat-card>
</mat-card-content>
</mat-card>
</div>