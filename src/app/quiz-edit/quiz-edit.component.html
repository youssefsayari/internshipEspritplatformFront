<div class="container">
  <h2>Modifier le Quiz</h2>

  <!-- Formulaire du Quiz -->
  <form [formGroup]="quizForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="titre">Titre</label>
      <input
        id="titre"
        type="text"
        class="form-control"
        formControlName="titre"
        [ngClass]="{ 'is-invalid': quizForm.get('titre').invalid && quizForm.get('titre').touched }"
      />
      <div *ngIf="quizForm.get('titre').invalid && quizForm.get('titre').touched" class="invalid-feedback">
        Le titre est requis (min 5 caractères, max 100 caractères).
      </div>
    </div>

    <div class="form-group">
      <label for="description">Description</label>
      <textarea
        id="description"
        class="form-control"
        formControlName="description"
        [ngClass]="{ 'is-invalid': quizForm.get('description').invalid && quizForm.get('description').touched }"
      ></textarea>
      <div *ngIf="quizForm.get('description').invalid && quizForm.get('description').touched" class="invalid-feedback">
        La description est requise (min 10 caractères).
      </div>
    </div>

    <div class="form-group">
      <label for="date_passage">Date de passage</label>
      <input
        id="date_passage"
        type="date"
        class="form-control"
        formControlName="date_passage"
        [ngClass]="{ 'is-invalid': quizForm.get('date_passage').invalid && quizForm.get('date_passage').touched }"
      />
      <div *ngIf="quizForm.get('date_passage').invalid && quizForm.get('date_passage').touched" class="invalid-feedback">
        La date doit être dans le futur.
      </div>
    </div>

    <!-- Liste des questions -->
    <div *ngFor="let questionForm of questionForms; let i = index">
      <h4>Question {{ i + 1 }}</h4>

      <div class="form-group">
        <label for="question">Question</label>
        <input
          id="question"
          type="text"
          class="form-control"
          [formControlName]="'question'"
          [ngClass]="{ 'is-invalid': questionForm.get('question').invalid && questionForm.get('question').touched }"
        />
        <div *ngIf="questionForm.get('question').invalid && questionForm.get('question').touched" class="invalid-feedback">
          La question est requise.
        </div>
      </div>

      <div class="form-group">
        <label for="option1">Option 1</label>
        <input
          id="option1"
          type="text"
          class="form-control"
          [formControlName]="'option1'"
          [ngClass]="{ 'is-invalid': questionForm.get('option1').invalid && questionForm.get('option1').touched }"
        />
        <div *ngIf="questionForm.get('option1').invalid && questionForm.get('option1').touched" class="invalid-feedback">
          Cette option est requise.
        </div>
      </div>

      <div class="form-group">
        <label for="option2">Option 2</label>
        <input
          id="option2"
          type="text"
          class="form-control"
          [formControlName]="'option2'"
          [ngClass]="{ 'is-invalid': questionForm.get('option2').invalid && questionForm.get('option2').touched }"
        />
        <div *ngIf="questionForm.get('option2').invalid && questionForm.get('option2').touched" class="invalid-feedback">
          Cette option est requise.
        </div>
      </div>

      <div class="form-group">
        <label for="option3">Option 3</label>
        <input
          id="option3"
          type="text"
          class="form-control"
          [formControlName]="'option3'"
          [ngClass]="{ 'is-invalid': questionForm.get('option3').invalid && questionForm.get('option3').touched }"
        />
        <div *ngIf="questionForm.get('option3').invalid && questionForm.get('option3').touched" class="invalid-feedback">
          Cette option est requise.
        </div>
      </div>

      <div class="form-group">
        <label for="option4">Option 4</label>
        <input
          id="option4"
          type="text"
          class="form-control"
          [formControlName]="'option4'"
          [ngClass]="{ 'is-invalid': questionForm.get('option4').invalid && questionForm.get('option4').touched }"
        />
        <div *ngIf="questionForm.get('option4').invalid && questionForm.get('option4').touched" class="invalid-feedback">
          Cette option est requise.
        </div>
      </div>

      <div class="form-group">
        <label for="reponse_correcte">Réponse correcte</label>
        <select
          id="reponse_correcte"
          class="form-control"
          [formControlName]="'reponse_correcte'"
          [ngClass]="{ 'is-invalid': questionForm.get('reponse_correcte').invalid && questionForm.get('reponse_correcte').touched }"
        >
          <option value="1">Option 1</option>
          <option value="2">Option 2</option>
          <option value="3">Option 3</option>
          <option value="4">Option 4</option>
        </select>
        <div *ngIf="questionForm.get('reponse_correcte').invalid && questionForm.get('reponse_correcte').touched" class="invalid-feedback">
          La réponse correcte est requise.
        </div>
      </div>
    </div>

    <button type="submit" class="btn btn-primary" [disabled]="quizForm.invalid">Modifier</button>
  </form>
</div>
